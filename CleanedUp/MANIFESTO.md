# Sudoku Solver (SS) Manifesto

> "Analyze critically and report out."

This document captures the philosophy, architecture, and standard operating procedures for the Sudoku Solver project. It serves as the "Red Pill" for anyone joining the projectâ€”a guide to wake you up to the reality of how we build key systems.

## 1. Core Philosophy

*   **Pragmatic & Self-Contained**: We prefer simple, robust solutions over complex dependencies. Raw SQL over ORMs, vanilla JS over frameworks, SQLite over heavy interactions.
*   **Visibility First**: Systems must be transparent. If it runs, we should see how it runs (logs, schemas, metrics in UI).
*   **Crash Recovery**: Things fail. The system should recover gracefully or provide clear, actionable error reports.
*   **TDD (Test Driven Development) for Languages**:
    1.  **The "Matrix 1" Test**: When adding a new language, your first and only goal is to get `1.matrix` (the simplest case) to run, solve, and output valid metrics.
    2.  **Environment Check**: Attempt to setup the environment. If `SetupAndRunme.file` (or `setupAndRunMe.sh`) exists, use it. If not, create the environment from scratch.
    3.  **Compile -> Execute -> Validate**: Every run must follow this pipeline.
*   **Dark Mode Default**: The aesthetic is non-negotiable. "Neon" theme, high contrast, visually stunning.

## 2. Workflows & Standards

### Adding a New Language
1.  **Directory**: Create `CleanedUp/Languages/[LanguageName]`.
2.  **Entry Point**:
    *   **Option A (Local)**: `setupAndRunMe.sh`. Must verify dependencies (compiler/interpreter), compile (if needed), and run the solver against provided matrix files.
    *   **Option B (Docker)**: `Dockerfile`. If present, the system will build and run this container.
3.  **Output**: Must generate `metrics.json` containing `time`, `iterations`, `memory`, `cpu`, and `status`.
4.  **Verification**: Run `./runMeGlobal.sh [LanguageName] 1`.

### Docker Strategy
*   **Re-Use Images**: Do not create unique snowflakes. Use a shared base image where possible (e.g., `sudoku-content-server` based on `node:18-alpine` with python/bash).
*   **Maintenance**:
    *   Keep `Dockerfile` and `package.json` in sync.
    *   If a new image is created, delete unused/dangling images to keep the host clean.
*   **Networking**:
    *   **Internal Map**: Map internal ports (e.g., 3000) to the default needed by the service.
    *   **External Map**: Always map external ports starting at **9900** (e.g., 9900, 9901...).
*   **Execution**: Test with "Matrix 1" inside the container to validate the setup before running the full suite.

### File & Folder Structure
*   **`CleanedUp/`**: The source of truth.
*   **`Languages/`**: Solver source code.
*   **`Metrics/`**: Report generation logic (`HTMLGenerator.ts`, `server.js`).
*   **`Matrices/`**: The puzzle inputs.
*   **`logos/`**: Local cache of language logos.
*   **`safejason`**: (Concept) Always use safe serialization when injecting JSON into HTML/JS (escape `</script>`, etc.).
*   **Artifacts**: Keep code, tools, tests, and docs in their own dedicated folders. Screenshots go to `screenshots/`.

## 3. UI Architecture

The **Benchmark Report (BR)** is a high-performance, single-file HTML report generated by `HTMLGenerator.ts`.

### Layout & Major Components
*   **Header**: "Sudoku Benchmark - Neon". Includes the **Solver Counter** (total distinct solvers) and global stats.
*   **Data Table**: The core component.
    *   **Rows**: One per language/solver.
    *   **Columns**: Language (Click for Detail Modal), Year, Composite Score, and Matrix 1..N results.
    *   **Visuals**: Hover glow effects (`#00ff9d`), "Fastest/Slowest" highlighting.
*   **Controls**:
    *   **Search/Filter**: Real-time filtering by language name.
    *   **Sort Buttons**: Sort by Time, Parsed Year, Language Name.
    *   **Mismatch Toggle**: "Filter MISMATCHES" / "Show [Persona Label]" (e.g., "Show FRACK").
    *   **Personality Selector**: Changes the "Narrator" voice (Standard, Angry, Pirate, Matrix/Morpheus).
*   **Modals**:
    *   **Language Detail**: Edit metadata (Creator, Description), upload/paste logos (`report_client.js` handles API calls to `server.js`).
    *   **Execution Log**: Shows stdout/stderr of a run.
    *   **Matrix View**: The "Red Pill" canvas.

### Visual Creation
*   **CSS**: Vanilla CSS variables (`--primary`, `--bg`). No Tailwind, no Bootstrap. Hand-crafted animations (glow, slide-ins).
*   **D3.js**: Used for dynamic charts (`#d3-chart-container`). Supports Line, Jockey (ranking over time), and Race (bar chart race) modes.
*   **Interactivity**: `report_client.js` handles all DOM manipulation. Data is injected as a JSON blob by `HTMLGenerator.ts`.

## 4. Cheat Sheet (Abbreviations)

| Abbreviation | Term | Description |
| :--- | :--- | :--- |
| **SS** | Sudoku Solver | The overall project name. |
| **BR** | Benchmark Report | The `benchmark_report.html` output file. |
| **RP** | Red Pill | The "Matrix" theme/mode/easter egg. Also refers to the "wake up" philosophy. |
| **TDD** | Test Driven Development | In our context: "Write code until Matrix 1 runs." |
| **HTMLGen** | HTMLGenerator.ts | The script that builds the BR. |
| **CS** | Content Server | The Node.js/Express server (`server.js`) handling API requests, edits, and locking. |

## 5. "Red Pill" Instructions (For the Next User)

> "I want to give you this content in another session on another user and I want you to be able to take off from here."

**To Resume Work:**
1.  **Read this Manifesto.**
2.  **Check `task.md`**: See what was left in progress.
3.  **Run the Global Script**: `./runMeGlobal.sh [Language] 1` is your sanity check.
4.  **Verify the Server**: Ensure `Metrics/ContentServer` is running (Port 91xx/99xx) if you need the UI features (Edit, Lock, Run from Web).
5.  **Adopt the Mindset**: Pragmatic, Visual, Robust.

---
*Generated by Antigravity*
