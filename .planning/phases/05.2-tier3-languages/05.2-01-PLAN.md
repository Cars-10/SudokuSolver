---
phase: 05.2-tier3-languages
plan: 01
type: execute
---

<objective>
Implement Awk and Tcl Sudoku solvers with exact algorithm match and C reference output format.

Purpose: Add text processing and scripting languages to the Tier 3 benchmark suite
Output: Working Awk and Tcl solvers passing all 5 matrix validations with exact iteration counts
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Reference implementation:**
@Languages/C/Sudoku.c

**Existing code directories:**
@Languages/Awk/
@Languages/Tcl/

**Reference iteration counts:**
- Matrix 1: 656
- Matrix 2: 439,269
- Matrix 3: 98,847
- Matrix 4: 9,085
- Matrix 5: 445,778

**Language notes:**
- Awk: Pattern-action language, excellent for text processing, uses associative arrays
- Tcl: Tool Command Language, embeddable scripting, uses lists and arrays
- Both are interpreted, expect slower than compiled languages
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement Awk solver</name>
  <files>Languages/Awk/Sudoku.awk, Languages/Awk/runMe.sh, Languages/Awk/README.md</files>
  <action>
    1. Create Sudoku.awk (using gawk for better features):
       - Use BEGIN block to initialize
       - Read puzzle from file (NR <= 9 stores rows)
       - Use 2D associative array: puzzle[row,col]
       - function is_valid(row, col, val)
       - function solve() - recursive backtracking
         for (val = 1; val <= 9; val++) {
           count++  # increment before validity check
           if (is_valid(row, col, val)) { ... }
         }
       - Print puzzle in exact C format (space-separated)

    2. Awk uses 1-based indexing naturally
       - Box calculation: box_row = int((row-1)/3)*3 + 1

    3. Create runMe.sh:
       - LANGUAGE="Awk"
       - No compilation needed
       - Run: gawk -f Sudoku.awk "$matrix_file"
       - Source ../common.sh

    4. Create README.md with implementation notes
  </action>
  <verify>
    docker exec sudokusolver-app-1 bash -c "cd /app/Languages/Awk && gawk -f Sudoku.awk ../../Matrices/1.matrix" | grep "Iterations=656"
  </verify>
  <done>Awk solver matches C reference output format and iteration count (656)</done>
</task>

<task type="auto">
  <name>Task 2: Validate Awk on all matrices</name>
  <files>Languages/Awk/metrics.json</files>
  <action>
    1. Run Awk solver on all 5 matrices in Docker:
       cd Languages/Awk && ./runMe.sh ../../Matrices/{1,2,3,4,5}.matrix

    2. Verify iteration counts match exactly:
       - 656, 439269, 98847, 9085, 445778

    3. Debug if counts don't match:
       - Check loop order (row-major)
       - Check increment placement (before validity check)

    4. Update README.md with validation results
  </action>
  <verify>
    docker exec sudokusolver-app-1 bash -c "cat /app/Languages/Awk/metrics.json" | grep -o '"iterations": [0-9]*' | head -5
  </verify>
  <done>Awk validated on all 5 matrices</done>
</task>

<task type="auto">
  <name>Task 3: Implement Tcl solver</name>
  <files>Languages/Tcl/Sudoku.tcl, Languages/Tcl/runMe.sh, Languages/Tcl/README.md</files>
  <action>
    1. Create Sudoku.tcl:
       - Use array for puzzle: set puzzle($row,$col) $value
       - proc read_matrix {filename}
       - proc print_puzzle {}
       - proc is_valid {row col val}
       - proc solve {} - recursive backtracking
         for {set val 1} {$val <= 9} {incr val} {
           incr ::count  # global counter
           if {[is_valid $row $col $val]} { ... }
         }
       - Print in exact C format

    2. Tcl uses 0-based or 1-based depending on implementation
       - Use 0-based for consistency with C

    3. Create runMe.sh:
       - LANGUAGE="Tcl"
       - No compilation needed
       - Run: tclsh Sudoku.tcl "$matrix_file"
       - Source ../common.sh

    4. Create README.md
  </action>
  <verify>
    docker exec sudokusolver-app-1 bash -c "cd /app/Languages/Tcl && tclsh Sudoku.tcl ../../Matrices/1.matrix" | grep "Iterations=656"
  </verify>
  <done>Tcl solver matches C reference for Matrix 1</done>
</task>

<task type="auto">
  <name>Task 4: Validate Tcl on all matrices</name>
  <files>Languages/Tcl/metrics.json</files>
  <action>
    1. Run Tcl solver on all 5 matrices:
       cd Languages/Tcl && ./runMe.sh ../../Matrices/{1,2,3,4,5}.matrix

    2. Verify iteration counts match exactly

    3. Update README.md with validation results
  </action>
  <verify>
    docker exec sudokusolver-app-1 bash -c "cat /app/Languages/Tcl/metrics.json" | grep -o '"iterations": [0-9]*' | head -5
  </verify>
  <done>Tcl validated on all 5 matrices</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Awk solver matches C output format and all 5 iteration counts
- [ ] Tcl solver matches C output format and all 5 iteration counts
- [ ] Both metrics.json files populated
- [ ] Both README.md files document validation status
- [ ] Both runMe.sh scripts follow common.sh pattern
- [ ] Row-major iteration order verified in both languages
- [ ] Both tested in Docker container
</verification>

<success_criteria>
- Awk and Tcl fully validated on all 5 matrices
- Both demonstrate text/scripting language characteristics
- Both use common.sh benchmark pattern
- Documentation complete
</success_criteria>

<output>
After completion, create `.planning/phases/05.2-tier3-languages/05.2-01-SUMMARY.md`
</output>
