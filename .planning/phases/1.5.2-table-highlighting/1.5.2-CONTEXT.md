# Phase 1.5.2: Table Highlighting - Context

**Gathered:** 2025-12-17
**Status:** Ready for planning

<vision>
## How This Should Work

The benchmark table should display comprehensive metrics with expandable rows for detailed data. When you hover over a row, it highlights cleanly without any content shifting. Clicking a row expands it inline to reveal organized sections of system info, compilation details, and per-matrix results.

The main table shows enhanced columns (language, score, matrix times, compiler version, memory peak, total, status) with a chevron icon indicating expandability. Expansion is instant - no animation, just show the detailed content organized in clear sections.

Data comes from all available sources: existing metrics.json files, enhanced benchmark capture, and SQLite database queries. Only the latest run per language is shown (no history comparison).

</vision>

<essential>
## What Must Be Nailed

- **Fix text shift on hover** - Border changes on hover must not cause layout shift (use transparent borders in default state)
- **Expandable rows working** - Click row to expand inline, chevron rotates to indicate state
- **Organized expanded content** - Three sections: System | Compilation | Results
- **Enhanced main columns** - Add compiler version and memory peak to visible columns

</essential>

<boundaries>
## What's Out of Scope

- Keyboard navigation - mouse interaction only
- Run history/comparison - show latest run only
- Mobile layout optimization - desktop focus
- Sorting changes - keep existing column sorting
- Animations - instant expand/collapse

</boundaries>

<specifics>
## Specific Ideas

**Text Shift Fix:**
- Root cause: border added on hover changes element size
- Solution: transparent border in default state, colored on hover

**Expand Indicator:**
- Chevron icon in first column
- Rotates 90 degrees when expanded (▶ → ▼)

**Expanded Row Content (organized sections):**
```
┌─────────────────────────────────────────────────────────────┐
│ System                                                       │
│ OS: macOS 14.2 | CPU: Apple M1 | RAM: 16GB | Arch: arm64    │
├─────────────────────────────────────────────────────────────┤
│ Compilation                                                  │
│ Compiler: gcc 14.0 | Flags: -O3 -march=native | Level: O3   │
├─────────────────────────────────────────────────────────────┤
│ Matrix Results                                               │
│ M1: 0.001s, 656 iter, 1.2MB | M2: 2.3s, 439K iter, 1.4MB   │
│ M3: 0.5s, 98K iter, 1.3MB   | M4: 0.02s, 9K iter, 1.2MB    │
│ M5: 2.1s, 445K iter, 1.5MB  |                               │
└─────────────────────────────────────────────────────────────┘
```

**Main Table Enhanced Columns:**
| Language | Score | M1 | M2 | M3 | M4 | M5 | Compiler | Mem Peak | Total | Status |

**Data Sources:**
- Languages/*/metrics.json - Per-run timing and iterations
- SQLite database - Historical queries
- Enhanced capture - System info, compiler details (may need script updates)

**Visual Style:**
- Keep current dark theme (cyan/pink accents)
- More contrast for row separation
- Clean borders without layout shift

</specifics>

<notes>
## Additional Context

This phase evolved from a simple "fix text shift" scope to a more comprehensive table enhancement. The core bug fix (text shift on hover) should be quick, but the expandable rows with comprehensive metrics will require:

1. Data capture enhancements (system info, compiler details)
2. HTMLGenerator.ts changes for new table structure
3. report_client.js for expand/collapse logic
4. CSS for hover effects and expanded row styling

Priority order:
1. Fix text shift bug (quick CSS fix)
2. Add chevron and basic expand/collapse
3. Enhance data capture
4. Build expanded row content sections

</notes>

---

*Phase: 1.5.2-table-highlighting*
*Context gathered: 2025-12-17*
