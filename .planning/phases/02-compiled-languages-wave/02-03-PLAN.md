---
phase: 02-compiled-languages-wave
plan: 03
type: execute
---

<objective>
Implement Rust solver following the established C baseline pattern.

Purpose: Third compiled language — completes the compiled languages wave with a memory-safe systems language.
Output: Rust passing all 5 matrices with exact iteration count matches, runMe.sh using common.sh, README.md documentation.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-compiled-languages-wave/2-CONTEXT.md
@.planning/phases/02-compiled-languages-wave/02-01-SUMMARY.md
@.planning/phases/02-compiled-languages-wave/02-02-SUMMARY.md

**Reference Implementation:**
@Languages/C/runMe.sh
@Languages/C/Sudoku.c
@Languages/common.sh

**Existing Rust Code:**
@Languages/Rust/Sudoku/src/main.rs
@Languages/Rust/Sudoku/Cargo.toml

**Reference Iteration Counts (must match exactly):**
- Matrix 1: 656
- Matrix 2: 439,269
- Matrix 3: 98,847
- Matrix 4: 9,085
- Matrix 5: 445,778

**Prior decisions:**
- Phase 1 established common.sh modular pattern
- Output format must match C exactly
- C++ and Go validated — same validation rigor applies
</context>

<tasks>

<task type="auto">
  <name>Task 1: Align Rust solver output format with C reference</name>
  <files>Languages/Rust/Sudoku/src/main.rs</files>
  <action>
Update main.rs to match C output format exactly:

1. In main(): REMOVE the debug args output
   - Delete: `println!("{:?}", args);`

2. In read_matrix_file(): Ensure path is printed BEFORE file content
   - Path normalization: if starts with "/app/Matrices/", print "../Matrices/X.matrix"
   - Print each row as parsed

3. Verify output format:
   - "Solved in Iterations=X" (check newline formatting matches C)
   - "Seconds to process X.XXX" format

4. Verify algorithm matches C:
   - Row-major search order (j then i loops, 0..9)
   - Candidate order 1-9 ascending (1..10 range)
   - Count incremented before is_possible check
   - Proper backtracking

DO NOT change the core algorithm logic — only output formatting.
  </action>
  <verify>cd Languages/Rust/Sudoku && cargo build --release && ./target/release/Sudoku ../../../Matrices/1.matrix — no debug output, iterations=656</verify>
  <done>Rust output format matches C reference exactly for Matrix 1</done>
</task>

<task type="auto">
  <name>Task 2: Create runMe.sh and validate all matrices</name>
  <files>Languages/Rust/runMe.sh</files>
  <action>
Create runMe.sh in Languages/Rust/ (not in Sudoku subdirectory):

```bash
#!/bin/bash
cd "$(dirname "$0")"

LANGUAGE="Rust"
SOLVER_BINARY="./Sudoku/target/release/Sudoku"
METRICS_FILE="metrics.json"
TIMEOUT_SECONDS=300

source ../common.sh

compile() {
    check_toolchain cargo
    if [ ! -f "Sudoku/Cargo.toml" ]; then
        report_env_error "Sudoku/Cargo.toml not found"
    fi
    echo "Compiling Rust solver with release optimizations..."
    cd Sudoku && cargo build --release
    if [ $? -ne 0 ]; then
        report_env_error "Compilation failed"
    fi
    cd ..
    echo "Compilation successful: ./Sudoku/target/release/Sudoku"
}

get_compile_flags() {
    local variant="${1:-default}"
    case "$variant" in
        debug) echo "" ;;  # cargo build (no --release)
        release|default) echo "--release" ;;
        *) echo "--release" ;;
    esac
}

main "$@"
```

Then run validation:
1. Execute: cd Languages/Rust && ./runMe.sh
2. Check metrics.json for all 5 matrices
3. Verify iteration counts match EXACTLY:
   - Matrix 1: 656
   - Matrix 2: 439,269
   - Matrix 3: 98,847
   - Matrix 4: 9,085
   - Matrix 5: 445,778

If ANY iteration count doesn't match, fix main.rs algorithm before proceeding.
  </action>
  <verify>cat Languages/Rust/metrics.json | grep iterations — all 5 must match reference</verify>
  <done>All 5 matrices pass with exact iteration count matches, metrics.json generated</done>
</task>

<task type="auto">
  <name>Task 3: Document Rust implementation</name>
  <files>Languages/Rust/README.md</files>
  <action>
Create README.md in Languages/Rust/ with:

1. **Validation Status** section showing all 5 matrices pass
2. **Compilation** section with cargo commands (debug vs release)
3. **Algorithm** section confirming brute-force match with C
4. **Performance** section with typical timing
5. **Dependencies** section noting num_integer crate for div_floor
6. **Notes** section about Rust-specific considerations (ownership, Vec vs array)

Delete old setupAndRunMe.sh if it exists.
  </action>
  <verify>cat Languages/Rust/README.md shows validation status</verify>
  <done>README.md documents validated Rust implementation, old scripts removed</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cargo build --release` compiles without errors
- [ ] Rust output format matches C exactly (no debug output)
- [ ] All 5 iteration counts match reference (656, 439269, 98847, 9085, 445778)
- [ ] metrics.json exists with all results
- [ ] README.md created with validation status
</verification>

<success_criteria>
- Rust solver compiles and runs all 5 matrices
- Iteration counts match C reference exactly (zero tolerance)
- runMe.sh uses common.sh pattern
- README.md documents implementation
- Old setupAndRunMe.sh removed
- Phase 2 complete: 4 languages validated (C, C++, Go, Rust)
</success_criteria>

<output>
After completion, create `.planning/phases/02-compiled-languages-wave/02-03-SUMMARY.md`:

# Phase 2 Plan 03: Rust Implementation Summary

**[One-liner: what shipped]**

## Accomplishments
- [Key outcomes]

## Files Created/Modified
- `Languages/Rust/Sudoku/src/main.rs` - [changes]
- `Languages/Rust/runMe.sh` - [created]
- `Languages/Rust/README.md` - [created]

## Validation Results
| Matrix | Expected | Actual | Status |
|--------|----------|--------|--------|
| 1 | 656 | ? | ? |
| 2 | 439269 | ? | ? |
| 3 | 98847 | ? | ? |
| 4 | 9085 | ? | ? |
| 5 | 445778 | ? | ? |

## Issues Encountered
[Problems and resolutions, or "None"]

## Phase 2 Complete
All 3 compiled languages (C++, Go, Rust) validated against C reference.
Total validated languages: 4 (C, C++, Go, Rust)

## Next Step
Phase 2 complete. Ready for Phase 3 (Scripting Languages: Python, Ruby, Perl)
</output>
