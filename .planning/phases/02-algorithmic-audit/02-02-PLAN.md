---
phase: 02-algorithmic-audit
plan: 02
type: execute
---

<objective>
Fix any algorithm mismatches identified in 02-01 and lock all verified Tier 1 languages.

Purpose: Ensure all Tier 1 implementations produce exactly 656 iterations for Matrix 1, achieving algorithmic consistency.
Output: Fixed implementations, updated session_state.json with all Tier 1 languages locked.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Prior plan output (load after 02-01 completes):**
@.planning/phases/02-algorithmic-audit/02-01-SUMMARY.md
@.planning/phases/02-algorithmic-audit/AUDIT_RESULTS.md
@.planning/phases/02-algorithmic-audit/TIER1_LANGUAGES.md

**Reference for algorithm fixes:**
@Languages/C/ALGORITHM.md
@Languages/C/Sudoku.c

**Prior decisions:**
- Use `runMe.sh` for execution (Phase 1)
- Tier 1 list defined in 02-01
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix iteration mismatches</name>
  <files>Languages/*/Sudoku.* (only languages that failed audit)</files>
  <action>
For each language in AUDIT_RESULTS.md marked as FAIL:

1. Read the source file (Languages/{LANG}/Sudoku.*)
2. Compare algorithm against C reference (Languages/C/Sudoku.c):
   - Search order: Must be row-major (outer loop row 0-8, inner loop col 0-8)
   - Candidate order: Must try 1-9 in ascending order
   - Counter placement: Must increment BEFORE validity check, inside candidate loop
   - No optimizations: No MRV, no constraint propagation
3. Fix the issue:
   - If counter in wrong place, move it
   - If search order wrong, fix loop structure
   - If candidate order wrong (9→1), reverse it
4. Re-run: cd Languages/{LANG} && ./runMe.sh ../../Matrices/1.matrix
5. Verify output contains "Solved in Iterations=656"

Common fixes by pattern:
- Counter after isValid check → move before
- Column-major search → swap loop order
- Descending candidates → change range to ascending

If language has ERROR status (missing script, runtime error):
- Check if runMe.sh exists and is executable
- Check if compiler/interpreter is available
- If truly broken, document and exclude from Tier 1
  </action>
  <verify>For each fixed language: ./runMe.sh ../../Matrices/1.matrix | grep "Iterations=656"</verify>
  <done>All previously failing Tier 1 languages now produce 656 iterations</done>
</task>

<task type="auto">
  <name>Task 2: Update session_state.json with locked languages</name>
  <files>session_state.json</files>
  <action>
Read current session_state.json and update the "locked" array:

1. Keep existing locked entries (Awk, C, C++, Go, Rust with timestamps)
2. Add all newly verified Tier 1 languages with current timestamp
3. Format: ["LanguageName", timestamp_ms]

Use JavaScript timestamp: Date.now() or equivalent

Ensure no duplicates in locked array.
Remove any null entries if present.

After update, locked array should contain all Tier 1 languages that passed audit.
  </action>
  <verify>cat session_state.json | grep -A 50 '"locked"' shows all Tier 1 languages</verify>
  <done>session_state.json locked array contains all verified Tier 1 languages with timestamps</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
All Tier 1 languages verified to produce exactly 656 iterations for Matrix 1.
session_state.json updated with locked status for verified languages.
  </what-built>
  <how-to-verify>
    1. Run: ./audit_tier1.sh
    2. Verify all Tier 1 languages show PASS status
    3. Check: cat session_state.json | jq '.locked | length' shows expected count
    4. Spot-check one language: cd Languages/Python && ./runMe.sh ../../Matrices/1.matrix | grep Iterations
    5. Confirm output shows "Solved in Iterations=656"
  </how-to-verify>
  <resume-signal>Type "approved" if all Tier 1 languages pass, or describe any remaining issues</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] All Tier 1 languages produce exactly 656 iterations for Matrix 1
- [ ] No algorithm mismatches remain in Tier 1
- [ ] session_state.json updated with all verified languages locked
- [ ] ./audit_tier1.sh exits with code 0 (all pass)
</verification>

<success_criteria>
- All Tier 1 languages pass Matrix 1 validation (656 iterations)
- All verified languages locked in session_state.json
- Phase 2 goal achieved: "Every Tier 1 language produces exactly 656 iterations for Matrix 1"
</success_criteria>

<output>
After completion, create `.planning/phases/02-algorithmic-audit/02-02-SUMMARY.md`:

# Phase 2 Plan 02: Fix Mismatches + Lock Verified Summary

**[Summary of what was fixed and locked]**

## Accomplishments
- [Languages fixed with specific issues]
- [Count of languages now locked]

## Files Created/Modified
- Languages/X/Sudoku.* - Fixed counter placement
- session_state.json - Added N locked languages

## Decisions Made
[Any languages excluded from Tier 1 and why]

## Issues Encountered
[Fixes required, unexpected problems]

## Next Step
Phase 2 complete, ready for Phase 3: UI Repair
</output>
