---
phase: 02.2-fix-screenshot-automation
plan: 01
type: execute
---

<objective>
Fix screenshot automation to capture viewport-only screenshots at 1920x1080 instead of full-page captures at 13000+ pixels.

Purpose: Screenshots should show the top of the report (chart + top 5 languages) in a standard desktop resolution, not a massive full-page capture.
Output: Working screenshot automation that captures consistent 1920x1080 viewport images.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02.2-fix-screenshot-automation/02.2-CONTEXT.md

**Relevant source files:**
@Metrics/ScreenshotUtils.ts
@Metrics/generate_report_only.ts

**Problem Identified:**
- Current code uses `fullPage: true` on line 38 of ScreenshotUtils.ts
- This captures the entire scrollable page (currently 13,353 pixels tall)
- User wants 1920x1080 viewport showing chart + top 5 languages only

**Solution:**
- Remove `fullPage: true` from the screenshot call
- Viewport is already set to 1920x1080 on line 19
- Without fullPage, Puppeteer captures only the visible viewport
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove fullPage option from screenshot call</name>
  <files>Metrics/ScreenshotUtils.ts</files>
  <action>
    On line 38, change:
    `await page.screenshot({ path: screenshotPath, fullPage: true });`

    To:
    `await page.screenshot({ path: screenshotPath });`

    This removes the fullPage option, causing Puppeteer to capture only the viewport (1920x1080 as set on line 19).
  </action>
  <verify>TypeScript compiles: `cd /Users/vibe/ClaudeCode/SudokuSolver/Metrics && npx tsc ScreenshotUtils.ts --noEmit --esModuleInterop --module NodeNext --moduleResolution NodeNext`</verify>
  <done>ScreenshotUtils.ts captures viewport-only screenshots</done>
</task>

<task type="auto">
  <name>Task 2: Test screenshot generation and verify dimensions</name>
  <files>None (verification only)</files>
  <action>
    1. Run generate_report_only.ts to create a new screenshot
    2. Check the dimensions of the new screenshot file
    3. Verify it's 1920x1080 (not 13000+ pixels tall)
  </action>
  <verify>
    Run: `cd /Users/vibe/ClaudeCode/SudokuSolver/Metrics && npx tsx generate_report_only.ts`
    Then: `file /Users/vibe/ClaudeCode/SudokuSolver/screenshots/*.png | tail -1`
    Should show: 1920 x 1080
  </verify>
  <done>New screenshot is 1920x1080 pixels</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] ScreenshotUtils.ts compiles without errors
- [ ] generate_report_only.ts runs without timeout errors
- [ ] New screenshot file created in screenshots/ directory
- [ ] Screenshot dimensions are 1920x1080 (not 13000+ pixels tall)
</verification>

<success_criteria>
- Screenshot automation captures viewport-only (1920x1080)
- No full-page capture (no 13000+ pixel tall images)
- Screenshot shows chart and top portion of benchmark table
</success_criteria>

<output>
After completion, create `.planning/phases/02.2-fix-screenshot-automation/02.2-01-SUMMARY.md`
</output>
