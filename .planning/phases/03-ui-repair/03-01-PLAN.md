---
phase: 03-ui-repair
plan: 01
type: execute
---

<objective>
Diagnose and repair the Content Server UI (editing modals, data flow) to allow seamless metadata updates.

Purpose: Restore the ability to edit language descriptions and other metadata directly from the web interface.
Output: Functional modals, working API endpoints for updates, and a usable "Red Pill" dashboard.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Known Issues (from GEMINI.md):**
- Content Server UI (modals, editing) is partially broken.
- Logo serving might be erratic.

**Relevant Codebase:**
- `server/`: The Node.js Express backend.
- `Metrics/`: Shared logic often used by the server.
- `Metrics/index.css`: Styles for the report/UI.
- `server/public/`: Static assets for the server.

**Current State:**
- Backend seems to be running (based on previous interactions).
- Frontend HTML is generated by `Metrics/HTMLGenerator.ts`, but the *interactive* parts (editing) are likely in client-side JS served by `server/`.
</context>

<tasks>

<task type="investigate">
  <name>Task 1: Audit Content Server Codebase</name>
  <files>server/index.js, server/routes.js, server/public/</files>
  <action>
1. Explore the `server/` directory to understand the API structure.
2. Identify the endpoints responsible for:
   - Serving the dashboard.
   - Handling metadata updates (POST/PUT requests).
3. Locate the client-side JavaScript responsible for:
   - Opening the "Edit" modal.
   - Populating the modal with data.
   - Submitting changes.
4. Document the data flow and identify broken links (e.g., incorrect API paths, missing DOM elements).
  </action>
</task>

<task type="auto">
  <name>Task 2: Fix Modal & Editing Logic</name>
  <files>server/public/app.js (or equivalent), server/routes/api.js</files>
  <action>
Based on the audit:
1. Fix the client-side event listeners that trigger the modal.
2. Ensure the modal form fields are correctly populated from the clicked element's data.
3. Fix the `fetch` or `XHR` call to ensure it sends the correct payload to the correct endpoint.
4. Ensure the backend endpoint correctly writes the updated metadata to `Languages/metadata.json` (or wherever it persists).
  </action>
</task>

<task type="auto">
  <name>Task 3: Verify Visuals (Neon Theme)</name>
  <files>Metrics/index.css</files>
  <action>
Ensure the modals and new UI elements adhere to the "Neon/Red Pill" aesthetic.
- Dark backgrounds.
- Glowing borders/text.
- Monospace fonts.
- Correct z-index for overlays.
  </action>
</task>

</tasks>

<verification>
- [ ] Clicking "Edit" on a language card opens a modal.
- [ ] The modal is pre-filled with correct data (Description, Creator, Year).
- [ ] Submitting the form updates the backend file.
- [ ] Refreshing the page shows the updated data.
- [ ] No console errors during the flow.
</verification>

<success_criteria>
- Fully functional "Edit Language" workflow.
- UI matches the project's visual theme.
</success_criteria>

<output>
After completion, create `.planning/phases/03-ui-repair/03-01-SUMMARY.md`
</output>
