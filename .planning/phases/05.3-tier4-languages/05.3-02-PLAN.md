---
phase: 05.3-tier4-languages
plan: 02
type: execute
---

<objective>
Implement Raku and GNU Octave Sudoku solvers with exact algorithm match and C reference output format.

Purpose: Add Perl 6 successor and MATLAB-compatible scientific language to Tier 4 benchmark suite
Output: Working Raku and Octave solvers passing all 5 matrix validations with exact iteration counts
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Reference implementation:**
@Languages/C/Sudoku.c

**Existing code directories:**
@Languages/Raku/
@Languages/Octave/

**Reference iteration counts:**
- Matrix 1: 656
- Matrix 2: 439,269
- Matrix 3: 98,847
- Matrix 4: 9,085
- Matrix 5: 445,778

**Language notes:**
- Raku (Perl 6): Complete redesign of Perl with grammars, sigils, and Unicode support. Uses Rakudo runtime.
- Octave: GNU MATLAB clone, array-oriented scientific computing. Uses 1-based indexing.
- Both are interpreted, expect moderate performance

**Critical algorithm requirement:**
```c
for (int val = 1; val <= 9; val++) {
    count++;  // COUNT BEFORE validity check
    if (isValid(row, col, val)) { ... }
}
```
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Raku and Octave to Dockerfile</name>
  <files>server/Dockerfile</files>
  <action>
    1. Add Raku (Rakudo) section:
       ```dockerfile
       # ----------------------------------------------------------------------------
       # 36. Raku (Rakudo)
       # ----------------------------------------------------------------------------
       RUN apt-get update && apt-get install -y \
           rakudo \
           && rm -rf /var/lib/apt/lists/*
       # raku --version: Rakudo 2024.x
       ```

    2. Add GNU Octave section:
       ```dockerfile
       # ----------------------------------------------------------------------------
       # 37. GNU Octave
       # ----------------------------------------------------------------------------
       RUN apt-get update && apt-get install -y \
           octave \
           && rm -rf /var/lib/apt/lists/*
       # octave --version: 8.x.x
       ```

    3. Rebuild Docker image:
       docker-compose build --no-cache app
  </action>
  <verify>
    docker exec sudokusolver-app-1 bash -c "raku --version && octave --version | head -1"
  </verify>
  <done>Raku and Octave toolchains available in Docker</done>
</task>

<task type="auto">
  <name>Task 2: Implement Raku solver</name>
  <files>Languages/Raku/Sudoku.raku, Languages/Raku/runMe.sh, Languages/Raku/README.md</files>
  <action>
    1. Create/fix Sudoku.raku matching C algorithm:
       - Use Raku arrays: my @puzzle[9;9]
       - count++ BEFORE is-valid check
       - Row-major traversal

       ```raku
       #!/usr/bin/env raku

       my @puzzle[9;9];
       my $count = 0;

       sub is-valid(Int $row, Int $col, Int $val --> Bool) {
           # Check row
           for ^9 -> $i { return False if @puzzle[$row;$i] == $val }
           # Check column
           for ^9 -> $i { return False if @puzzle[$i;$col] == $val }
           # Check 3x3 box
           my $br = ($row div 3) * 3;
           my $bc = ($col div 3) * 3;
           for ^3 -> $i {
               for ^3 -> $j {
                   return False if @puzzle[$br+$i;$bc+$j] == $val;
               }
           }
           return True;
       }

       sub solve(--> Bool) {
           for ^9 -> $row {
               for ^9 -> $col {
                   if @puzzle[$row;$col] == 0 {
                       for 1..9 -> $val {
                           $count++;  # COUNT BEFORE validity check
                           if is-valid($row, $col, $val) {
                               @puzzle[$row;$col] = $val;
                               return True if solve();
                               @puzzle[$row;$col] = 0;
                           }
                       }
                       return False;
                   }
               }
           }
           return True;
       }
       ```

    2. Output format matching C exactly

    3. Create runMe.sh:
       ```bash
       #!/bin/bash
       LANGUAGE="Raku"
       source ../common.sh
       run_benchmark "raku Sudoku.raku"
       ```

    4. Create README.md
  </action>
  <verify>
    docker exec sudokusolver-app-1 bash -c "cd /app/Languages/Raku && raku Sudoku.raku /app/Matrices/1.matrix" | grep "Iterations=656"
  </verify>
  <done>Raku solver matches C reference for Matrix 1</done>
</task>

<task type="auto">
  <name>Task 3: Implement Octave solver</name>
  <files>Languages/Octave/Sudoku.m, Languages/Octave/runMe.sh, Languages/Octave/README.md</files>
  <action>
    1. Create Sudoku.m matching C algorithm:
       - Octave uses 1-based indexing (adjust accordingly)
       - Use global for count variable
       - count++ BEFORE is_valid check

       ```octave
       #!/usr/bin/env octave

       global puzzle;
       global count;
       puzzle = zeros(9,9);
       count = 0;

       function result = is_valid(row, col, val)
         global puzzle;
         % Check row (Octave is 1-based)
         for i = 1:9
           if puzzle(row, i) == val
             result = 0; return;
           endif
         endfor
         % Check column
         for i = 1:9
           if puzzle(i, col) == val
             result = 0; return;
           endif
         endfor
         % Check 3x3 box
         br = floor((row-1)/3)*3 + 1;
         bc = floor((col-1)/3)*3 + 1;
         for i = 0:2
           for j = 0:2
             if puzzle(br+i, bc+j) == val
               result = 0; return;
             endif
           endfor
         endfor
         result = 1;
       endfunction

       function result = solve()
         global puzzle count;
         for row = 1:9
           for col = 1:9
             if puzzle(row, col) == 0
               for val = 1:9
                 count = count + 1;  % COUNT BEFORE validity check
                 if is_valid(row, col, val)
                   puzzle(row, col) = val;
                   if solve() == 1
                     result = 1; return;
                   endif
                   puzzle(row, col) = 0;
                 endif
               endfor
               result = 0; return;
             endif
           endfor
         endfor
         result = 1;
       endfunction
       ```

    2. Read matrix file and output in C format

    3. Create runMe.sh:
       ```bash
       #!/bin/bash
       LANGUAGE="Octave"
       source ../common.sh
       run_benchmark "octave --no-gui Sudoku.m"
       ```

    4. Create README.md
  </action>
  <verify>
    docker exec sudokusolver-app-1 bash -c "cd /app/Languages/Octave && octave --no-gui Sudoku.m /app/Matrices/1.matrix" | grep "Iterations=656"
  </verify>
  <done>Octave solver matches C reference for Matrix 1</done>
</task>

<task type="auto">
  <name>Task 4: Validate both languages on all matrices</name>
  <files>Languages/Raku/metrics.json, Languages/Octave/metrics.json</files>
  <action>
    1. Run full validation for Raku:
       cd Languages/Raku && ./runMe.sh /app/Matrices/{1,2,3,4,5}.matrix

    2. Run full validation for Octave:
       cd Languages/Octave && ./runMe.sh /app/Matrices/{1,2,3,4,5}.matrix

    3. Verify all iteration counts match exactly

    4. Regenerate benchmark report

    5. Update README.md files with validation results
  </action>
  <verify>
    docker exec sudokusolver-app-1 bash -c "cat /app/Languages/Raku/metrics.json /app/Languages/Octave/metrics.json" | grep -o '"iterations": [0-9]*' | head -10
  </verify>
  <done>Both Raku and Octave validated on all 5 matrices</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Docker image rebuilt with Raku and Octave
- [ ] Raku solver: count++ BEFORE is-valid check
- [ ] Octave solver: 1-based indexing handled correctly
- [ ] Both match all 5 iteration counts
- [ ] Both runMe.sh scripts follow common.sh pattern
- [ ] Both README.md files document validation status
</verification>

<success_criteria>
- Raku and Octave fully validated on all 5 matrices
- Both demonstrate modern scripting language characteristics
- 43 languages total passing validation
</success_criteria>

<output>
After completion, create `.planning/phases/05.3-tier4-languages/05.3-02-SUMMARY.md`
</output>
