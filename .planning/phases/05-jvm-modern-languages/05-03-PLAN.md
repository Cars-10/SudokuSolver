---
phase: 05-jvm-modern-languages
plan: 03
type: execute
---

<objective>
Implement Kotlin Sudoku solver with exact algorithm match and C reference output format.

Purpose: Add Kotlin to the validated benchmark suite (JVM language similar to Java)
Output: Working Kotlin solver passing all 5 matrix validations with exact iteration counts
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Reference implementation (use Java as closest match):**
@Languages/Java/Sudoku.java
@Languages/Java/runMe.sh

**Existing Kotlin (stub only - needs full implementation):**
@Languages/Kotlin/Sudoku.kt

**Reference iteration counts:**
- Matrix 1: 656
- Matrix 2: 439,269
- Matrix 3: 98,847
- Matrix 4: 9,085
- Matrix 5: 445,778

**Kotlin-specific notes:**
- Compiles to JVM bytecode, similar runtime to Java
- Can use kotlinc for compilation
- Output runs with: kotlin SudokuKt or java -jar
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement Kotlin solver</name>
  <files>Languages/Kotlin/Sudoku.kt</files>
  <action>
    Create complete Kotlin Sudoku solver matching C reference algorithm EXACTLY:

    **Algorithm (MUST match C):**
    - Search order: Row-major (top-to-bottom, left-to-right)
    - Candidate values: 1-9 in ascending order
    - Iteration counting: Every value placement attempt increments count
    - Validation: Check row, column, and 3x3 box constraints

    **Structure:**
    ```kotlin
    // Global state
    var puzzle = Array(9) { IntArray(9) }
    var count: Long = 0

    fun isPossible(y: Int, x: Int, value: Int): Boolean { ... }
    fun solve(): Boolean { ... }  // Recursive, row-major search
    fun readMatrixFile(filename: String) { ... }
    fun printPuzzle() { ... }
    fun main(args: Array<String>) { ... }
    ```

    **Output format (EXACT match to C):**
    1. Print path (e.g., "../../Matrices/1.matrix")
    2. Echo raw matrix rows as read (space-separated, trailing space)
    3. Blank line
    4. "Puzzle:" header + initial state
    5. Blank line
    6. "Puzzle:" header + solved state
    7. Blank line
    8. "Solved in Iterations={count}"
    9. Blank line
    10. "Seconds to process {time:.3f}"

    Use System.nanoTime() for timing, convert to seconds with 3 decimal places.
  </action>
  <verify>kotlinc Sudoku.kt -include-runtime -d Sudoku.jar && java -jar Sudoku.jar ../../Matrices/1.matrix</verify>
  <done>Kotlin solver compiles and produces output with correct iteration count (656 for Matrix 1)</done>
</task>

<task type="auto">
  <name>Task 2: Create Kotlin runMe.sh and validate</name>
  <files>Languages/Kotlin/runMe.sh, Languages/Kotlin/README.md, Languages/Kotlin/metrics.json</files>
  <action>
    1. Create runMe.sh following common.sh pattern:
       - Set LANGUAGE="Kotlin"
       - Set SOLVER_BINARY="java -jar Sudoku.jar"
       - Add compile() using kotlinc with -include-runtime -d Sudoku.jar
       - Source ../common.sh
       - Override run_matrix() for java -jar execution
       - Call main "$@"

    2. Compile and run all 5 matrices:
       ./runMe.sh ../../Matrices/{1,2,3,4,5}.matrix

    3. Validate iteration counts match reference exactly

    4. Create README.md documenting:
       - Validation status table
       - Algorithm description (exact port of C)
       - Requirements (Kotlin 1.9+, JVM)
       - Compilation and execution instructions
       - Performance notes (JVM warmup, memory overhead)
  </action>
  <verify>
    1. grep "iterations.*656" Languages/Kotlin/metrics.json
    2. grep "iterations.*439269" Languages/Kotlin/metrics.json
    3. All 5 matrices show "success" status
  </verify>
  <done>Kotlin fully validated with all 5 matrices passing, README.md complete</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Kotlin compiles without errors
- [ ] Output matches C reference format exactly
- [ ] All 5 matrices pass iteration validation (656, 439269, 98847, 9085, 445778)
- [ ] metrics.json populated with all results
- [ ] README.md documents validation status
</verification>

<success_criteria>
- Kotlin solver produces exact output format matching C
- All iteration counts match C reference
- No compilation errors
- Documented and ready for benchmark inclusion
</success_criteria>

<output>
After completion, create `.planning/phases/05-jvm-modern-languages/05-03-SUMMARY.md`
</output>
