description = "Create detailed execution plan for a phase (PLAN.md)"
prompt = "<objective>\nCreate executable phase prompt with discovery, context injection, and task breakdown.\n\nPurpose: Break down roadmap phases into concrete, executable PLAN.md files that Gemini can execute.\nOutput: One or more PLAN.md files in the phase directory (.planning/phases/XX-name/{phase}-{plan}-PLAN.md)\n</objective>\n\n<execution_context>\n@./.gemini/get-shit-done/workflows/plan-phase.md\n@./.gemini/get-shit-done/templates/phase-prompt.md\n@./.gemini/get-shit-done/references/plan-format.md\n@./.gemini/get-shit-done/references/scope-estimation.md\n@./.gemini/get-shit-done/references/checkpoints.md\n@./.gemini/get-shit-done/references/tdd.md\n</execution_context>\n\n<context>\nPhase number: $ARGUMENTS (optional - auto-detects next unplanned phase if not provided)\n\n**Load project state first:**\n@.planning/STATE.md\n\n**Load roadmap:**\n@.planning/ROADMAP.md\n\n**Load phase context if exists (created by /gsd:discuss-phase):**\nCheck for and read `.planning/phases/XX-name/{phase}-CONTEXT.md` - contains research findings, clarifications, and decisions from phase discussion.\n\n**Load codebase context if exists:**\nCheck for `.planning/codebase/` and load relevant documents based on phase type.\n</context>\n\n<process>\n1. Check .planning/ directory exists (error if not - user should run /gsd:new-project)\n2. If phase number provided via $ARGUMENTS, validate it exists in roadmap\n3. If no phase number, detect next unplanned phase from roadmap\n4. Follow plan-phase.md workflow:\n   - Load project state and accumulated decisions\n   - Perform mandatory discovery (Level 0-3 as appropriate)\n   - Read project history (prior decisions, issues, concerns)\n   - Break phase into tasks\n   - Estimate scope and split into multiple plans if needed\n   - Create PLAN.md file(s) with executable structure\n</process>\n\n<success_criteria>\n\n- One or more PLAN.md files created in .planning/phases/XX-name/\n- Each plan has: objective, execution_context, context, tasks, verification, success_criteria, output\n- Tasks are specific enough for Gemini to execute\n- User knows next steps (execute plan or review/adjust)\n  </success_criteria>"
