description = "Archive completed milestone and prepare for next version"
prompt = "<objective>\nMark milestone {{version}} complete, archive to milestones/, and update ROADMAP.md.\n\nPurpose: Create historical record of shipped version, collapse completed work in roadmap, and prepare for next milestone.\nOutput: Milestone archived, roadmap reorganized, git tagged.\n</objective>\n\n<execution_context>\n**Load these files NOW (before proceeding):**\n\n- @./.gemini/get-shit-done/workflows/complete-milestone.md (main workflow)\n- @./.gemini/get-shit-done/templates/milestone-archive.md (archive template)\n  </execution_context>\n\n<context>\n**Project files:**\n- `.planning/ROADMAP.md`\n- `.planning/STATE.md`\n- `.planning/PROJECT.md`\n\n**User input:**\n\n- Version: {{version}} (e.g., \"1.0\", \"1.1\", \"2.0\")\n  </context>\n\n<process>\n\n**Follow complete-milestone.md workflow:**\n\n1. **Verify readiness:**\n\n   - Check all phases in milestone have completed plans (SUMMARY.md exists)\n   - Present milestone scope and stats\n   - Wait for confirmation\n\n2. **Gather stats:**\n\n   - Count phases, plans, tasks\n   - Calculate git range, file changes, LOC\n   - Extract timeline from git log\n   - Present summary, confirm\n\n3. **Extract accomplishments:**\n\n   - Read all phase SUMMARY.md files in milestone range\n   - Extract 4-6 key accomplishments\n   - Present for approval\n\n4. **Archive milestone:**\n\n   - Create `.planning/milestones/v{{version}}-ROADMAP.md`\n   - Extract full phase details from ROADMAP.md\n   - Fill milestone-archive.md template\n   - Update ROADMAP.md to one-line summary with link\n   - Offer to create next milestone\n\n5. **Update PROJECT.md:**\n\n   - Add \"Current State\" section with shipped version\n   - Add \"Next Milestone Goals\" section\n   - Archive previous content in `<details>` (if v1.1+)\n\n6. **Commit and tag:**\n\n   - Stage: MILESTONES.md, PROJECT.md, ROADMAP.md, STATE.md, archive file\n   - Commit: `chore: archive v{{version}} milestone`\n   - Tag: `git tag -a v{{version}} -m \"[milestone summary]\"`\n   - Ask about pushing tag\n\n7. **Offer next steps:**\n   - Plan next milestone\n   - Archive planning\n   - Done for now\n\n</process>\n\n<success_criteria>\n\n- Milestone archived to `.planning/milestones/v{{version}}-ROADMAP.md`\n- ROADMAP.md collapsed to one-line entry\n- PROJECT.md updated with current state\n- Git tag v{{version}} created\n- Commit successful\n- User knows next steps\n  </success_criteria>\n\n<critical_rules>\n\n- **Load workflow first:** Read complete-milestone.md before executing\n- **Verify completion:** All phases must have SUMMARY.md files\n- **User confirmation:** Wait for approval at verification gates\n- **Archive before collapsing:** Always create archive file before updating ROADMAP.md\n- **One-line summary:** Collapsed milestone in ROADMAP.md should be single line with link\n- **Context efficiency:** Archive keeps ROADMAP.md constant size\n  </critical_rules>"
