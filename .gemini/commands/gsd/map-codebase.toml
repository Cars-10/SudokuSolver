description = "Analyze codebase with parallel Explore agents to produce .planning/codebase/ documents"
prompt = "<objective>\nAnalyze existing codebase using parallel Explore agents to produce structured codebase documents.\n\nThis command spawns multiple Explore agents to analyze different aspects of the codebase in parallel, each with fresh context.\n\nOutput: .planning/codebase/ folder with 7 structured documents about the codebase state.\n</objective>\n\n<execution_context>\n@./.gemini/get-shit-done/workflows/map-codebase.md\n@./.gemini/get-shit-done/templates/codebase/stack.md\n@./.gemini/get-shit-done/templates/codebase/architecture.md\n@./.gemini/get-shit-done/templates/codebase/structure.md\n@./.gemini/get-shit-done/templates/codebase/conventions.md\n@./.gemini/get-shit-done/templates/codebase/testing.md\n@./.gemini/get-shit-done/templates/codebase/integrations.md\n@./.gemini/get-shit-done/templates/codebase/concerns.md\n</execution_context>\n\n<context>\nFocus area: $ARGUMENTS (optional - if provided, tells agents to focus on specific subsystem)\n\n**Load project state if exists:**\nCheck for .planning/STATE.md - loads context if project already initialized\n\n**This command can run:**\n- Before /gsd:new-project (brownfield codebases) - creates codebase map first\n- After /gsd:new-project (greenfield codebases) - updates codebase map as code evolves\n- Anytime to refresh codebase understanding\n</context>\n\n<when_to_use>\n**Use map-codebase for:**\n- Brownfield projects before initialization (understand existing code first)\n- Refreshing codebase map after significant changes\n- Onboarding to an unfamiliar codebase\n- Before major refactoring (understand current state)\n- When STATE.md references outdated codebase info\n\n**Skip map-codebase for:**\n- Greenfield projects with no code yet (nothing to map)\n- Trivial codebases (<5 files)\n</when_to_use>\n\n<process>\n1. Check if .planning/codebase/ already exists (offer to refresh or skip)\n2. Create .planning/codebase/ directory structure\n3. Spawn 4 parallel Explore agents to analyze codebase:\n   - Agent 1: Stack + Integrations (technology focus)\n   - Agent 2: Architecture + Structure (organization focus)\n   - Agent 3: Conventions + Testing (quality focus)\n   - Agent 4: Concerns (issues focus)\n4. Wait for all agents to complete, collect findings\n5. Write 7 codebase documents using templates:\n   - STACK.md - Languages, frameworks, key dependencies\n   - ARCHITECTURE.md - System design, patterns, data flow\n   - STRUCTURE.md - Directory layout, module organization\n   - CONVENTIONS.md - Code style, naming, patterns\n   - TESTING.md - Test structure, coverage, practices\n   - INTEGRATIONS.md - APIs, databases, external services\n   - CONCERNS.md - Technical debt, risks, issues\n6. Offer next steps (typically: /gsd:new-project or /gsd:plan-phase)\n</process>\n\n<success_criteria>\n- [ ] .planning/codebase/ directory created\n- [ ] All 7 codebase documents written\n- [ ] Documents follow template structure\n- [ ] Parallel agents completed without errors\n- [ ] User knows next steps\n</success_criteria>"
